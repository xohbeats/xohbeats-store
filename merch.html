<section class="merch-grid" id="merchGrid">
  <!-- Product cards will be injected here -->
</section>

<script>
  async function loadMerch() {
    const merchGrid = document.getElementById('merchGrid');

    try {
      const res = await fetch('/api/products');
      const products = await res.json();

      merchGrid.innerHTML = '';

      products.forEach((p, i) => {
        merchGrid.innerHTML += `
          <div class="product-card" data-aos="fade-up" data-aos-delay="${i * 100}">
            <img src="${p.sync_product.thumbnail_url}" alt="${p.name}" />
            <h2>${p.name}</h2>
            <p>$${p.retail_price || 'â€”'}</p>
            <a href="https://xollent.printful.com/product/${p.id}" target="_blank">Buy Now</a>
          </div>`;
      });
    } catch (err) {
      merchGrid.innerHTML = '<p style="color: red;">Failed to load merch. Please try again later.</p>';
      console.error(err);
    }
  }

  window.addEventListener('DOMContentLoaded', loadMerch);
</script>
